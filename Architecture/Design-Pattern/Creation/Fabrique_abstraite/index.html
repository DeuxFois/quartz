<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Fabrique abstraite permet de créer des familles d’objets apparentés sans préciser leur classe concrète.
 Problème Imaginons la création d’un simulateur pour un magasin de meubles."><title>Fabrique abstraite / Abstract Factory</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://deuxfois.github.io/quartz//icon.png><link href=https://deuxfois.github.io/quartz/styles.b54f56dc7e7fdf6be9a4427dc6b0509b.min.css rel=stylesheet><link href=https://deuxfois.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://deuxfois.github.io/quartz/js/darkmode.69b2c08ae0f08c3a3f86259a122e1f06.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/util.39f53d45cb9520bdaf946bd063598b19.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://deuxfois.github.io/quartz/js/popover.37b1455b8f0603154072b9467132c659.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://deuxfois.github.io/quartz/",fetchData=Promise.all([fetch("https://deuxfois.github.io/quartz/indices/linkIndex.3b4e6d48a296906ef79bdbe4f350bfdc.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://deuxfois.github.io/quartz/indices/contentIndex.8c379164d481b4535372d62b3f21de15.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL(BASE_URL),s=n.pathname,o=window.location.pathname,i=s==o;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts();const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!0;drawGraph("https://deuxfois.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:2,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://deuxfois.github.io/quartz",!0,!0)},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/deuxfois.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://deuxfois.github.io/quartz/js/full-text-search.0ec5fb908204b9e13989f2c640c0870b.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://deuxfois.github.io/quartz/>⛄ DeuxFoi's blog</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Fabrique abstraite / Abstract Factory</h1><p class=meta>Last updated
Aug 4, 2022
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/Architecture/Design-Pattern/Creation/Fabrique_abstraite.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://deuxfois.github.io/quartz/tags/cr%C3%A9ation/>Création</a></li><li><a href=https://deuxfois.github.io/quartz/tags/design_pattern/>Design pattern</a></li></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#problème>Problème</a></li><li><a href=#solution>Solution</a></li><li><a href=#structure>Structure</a></li><li><a href=#pseudo-code>Pseudo-code</a></li><li><a href=#possibilités-dapplication>Possibilités d’application</a></li><li><a href=#mise-en-œuvre>Mise en œuvre</a></li><li><a href=#avantages-et-inconvénients>Avantages et inconvénients</a></li><li><a href=#liens-avec-les-autres-patrons>Liens avec les autres patrons</a></li><li><a href=#exemples-de-code>Exemples de code</a></li><li><a href=#informations-supplémentaires>Informations supplémentaires</a><ol><li><a href=#soutenez-notre-site-gratuit-et-obtenez-lebook>Soutenez notre site gratuit et obtenez l’ebook !</a></li></ol></li></ol></nav></details></aside><p><strong>Fabrique abstraite</strong> permet de créer des familles d’objets apparentés sans préciser leur classe concrète.</p><p><img src=https://deuxfois.github.io/quartz//../../_resources/abstract-factory-fr_d627b05adce64634b9de210dc74587.png width=auto alt="Patron de conception fabrique abstraite"></p><a href=#problème><h2 id=problème><span class=hanchor arialabel=Anchor># </span>Problème</h2></a><p>Imaginons la création d’un simulateur pour un magasin de meubles. Votre code contient les classes suivantes :</p><ol><li><p>Une famille de produits appartenant à un même thème : <code>Chaise</code> + <code>Sofa</code> + <code>TableBasse</code>.</p></li><li><p>Plusieurs variantes de cette famille. Par exemple, les produits <code>Chaise</code> + <code>Sofa</code> + <code>TableBasse</code> sont disponibles dans les variantes suivantes : <code>Moderne</code>, <code>Victorien</code>, <code>ArtDéco</code>.</p></li></ol><p><img src=https://deuxfois.github.io/quartz//../../_resources/problem-fr_2064ebbba37e4f05818766362d9d1dd9.png width=auto alt="Familles de produits et leurs variantes"></p><p>Familles de produits et leurs variantes.</p><p>Vous devez trouver une solution pour créer des objets individuels (des meubles) et les faire correspondre à d’autres objets de la même famille. Les clients sont agacés lorsqu’ils reçoivent des meubles qui ne se marient pas.</p><img width=600 height=0 src=../../_resources/abstract-factory-comic-1-fr_420a4a25fc424ff7ba7cd6.png class=jop-noMdConv><p>Un sofa moderne ne se marie pas avec des chaises de style victorien.</p><p>De plus, vous n’avez pas envie de réécrire votre code chaque fois que vous ajoutez de nouvelles familles de produits à votre programme. Les vendeurs de meubles alimentent régulièrement leurs catalogues et il n’est pas envisageable de restructurer le code à chaque mise à jour.</p><a href=#solution><h2 id=solution><span class=hanchor arialabel=Anchor># </span>Solution</h2></a><p>La première chose que propose la fabrique abstraite est de déclarer explicitement des interfaces pour chaque produit de la famille de produits (dans notre cas : chaise, sofa, table basse). Toutes les autres variantes de produits peuvent ensuite se servir de ces interfaces. Par exemple, toutes les variantes de chaises peuvent implémenter l’interface <code>Chaise</code> ; toutes les variantes de tables basses peuvent implémenter <code>TableBasse</code>, etc.</p><img width=420 height=0 src=../../_resources/solution1_cfcf64e484574e72bc8100689f8f92e2.png class=jop-noMdConv><p>Toutes les variantes du même objet peuvent être rangées dans la même hiérarchie de classe.</p><p>La prochaine étape est de déclarer la <em>fabrique abstraite</em> — une interface armée d’une liste de méthodes de création pour toutes les familles de produits (par exemple : <code>créerChaise</code>, <code>créerSofa</code> et <code>créerTableBasse</code>). Ces méthodes doivent renvoyer tous les types de produits <strong>abstraits</strong> des interfaces que nous avons créées précédemment : <code>Chaise</code>, <code>Sofa</code>, <code>TableBasse</code>, etc.</p><img width=640 height=0 src=../../_resources/solution2_e6b5780abba24a85b2313f973507e5ad.png class=jop-noMdConv><p>Chaque fabrique concrète correspond à une variante d’un produit spécifique.</p><p>Mais que deviennent les variantes des produits ? Pour chaque variante d’une famille de produits, nous créons une classe fabrique qui implémente l’interface <code>FabriqueAbstraite</code>. Une fabrique est une classe qui retourne un certain type de produits. Par exemple, la <code>FabriqueMeubleModerne</code> peut uniquement créer des <code>ChaiseModerne</code>, des <code>SofaModerne</code> et des <code>TableBasseModerne</code>.</p><p>Le code client travaille simultanément avec les interfaces abstraites respectives des fabriques et des produits. Nous pouvons ainsi changer le type de fabrique passé au code client et la variante de produit qu’il reçoit, sans avoir à le modifier.</p><img width=600 height=0 src=../../_resources/abstract-factory-comic-2-fr_30b3e8fb3eee4b6e86d1fa.png class=jop-noMdConv><p>Le client n’a pas besoin de connaître la classe concrète des fabriques qu’il utilise.</p><p>Imaginons un cas où le client désire une fabrique qui peut produire une chaise. Le client n’a pas à se préoccuper de la classe de la fabrique ni du type de chaise qu’il va obtenir. Il doit traiter les chaises de la même manière, que ce soit un modèle de style moderne ou victorien, en utilisant l’interface abstraite <code>Chaise</code>. Grâce à cette approche, le client ne sait qu’une seule chose à propos de la chaise, c’est qu’elle implémente la méthode <code>sasseoir</code>. De plus, quelle que soit la variante de la chaise renvoyée, elle correspondra systématiquement au type de sofa ou de table basse produit par le même objet fabrique.</p><p>Il ne reste plus qu’un point à éclaircir : si le client n’est lié qu’aux interfaces abstraites, comment les objets de la fabrique sont-ils créés ? En général, l’application crée un objet fabrique concret lors de l’initialisation. Mais avant cela, l’application doit choisir le type de la fabrique en fonction de la configuration ou des paramètres d’environnement.</p><a href=#structure><h2 id=structure><span class=hanchor arialabel=Anchor># </span>Structure</h2></a><img width=720 height=0 src=../../_resources/structure_70f1dd00d1474d72872306b7ca75bd65.png class=jop-noMdConv><ol><li><p>Les <strong>Produits Abstraits</strong> déclarent une interface pour un ensemble d’objets distincts mais apparentés, qui forment une famille de produits.</p></li><li><p>Les <strong>Produits Concrets</strong> sont des implémentations des produits abstraits groupés par variantes. Chaque produit abstrait (chaise/sofa) doit être implémenté dans toutes les variantes (victorien/moderne).</p></li><li><p>L’interface <strong>Fabrique Abstraite</strong> déclare un ensemble de méthodes pour créer chacun des produits abstraits.</p></li><li><p>Les <strong>Fabriques Concrètes</strong> implémentent les opérations de création d’objets de la fabrique abstraite. Chaque fabrique concrète correspond à une variante spécifique de produits et ne crée que ces variantes.</p></li><li><p>Bien que les fabriques concrètes instancient des produits concrets, leurs méthodes de création ont une valeur de retour correspondant aux produits <em>abstraits</em>. Le code client qui sollicite une fabrique est ainsi isolé de la variante du produit obtenu. Le <strong>client</strong> peut travailler avec n’importe quelle variante de fabrique ou produit, tant qu’il interagit avec les interfaces abstraites.</p></li></ol><a href=#pseudo-code><h2 id=pseudo-code><span class=hanchor arialabel=Anchor># </span>Pseudo-code</h2></a><p>Cet exemple montre comment la <strong>Fabrique abstraite</strong> peut être utilisée pour créer des éléments d’une UI multiplateforme sans coupler le code client avec les classes concrètes de l’UI, tout en gardant une cohérence entre les éléments créés et le système d’exploitation sélectionné.</p><img width=640 height=0 src=../../_resources/example_183b183486524de08826bc72544798df.png class=jop-noMdConv><p>Exemple des classes d’une UI multiplateforme</p><p>Tous les éléments de l’UI d’une application multiplateforme sont censés avoir un comportement identique quel que soit le système d’exploitation, mais leur apparence peut légèrement varier. Vous devez faire en sorte que les éléments de l’interface correspondent bien au style du système d’exploitation. Vous ne voudriez pas vous retrouver avec des boutons macOS dans Windows.</p><p>L’interface de la fabrique abstraite déclare un ensemble de méthodes de création que le code client peut utiliser pour produire différents types d’éléments de l’UI. Chaque fabrique concrète correspond à un système d’exploitation particulier et crée ses propres éléments de l’UI en fonction de ce système d’exploitation.</p><p>Le fonctionnement est le suivant : lorsqu’une application est exécutée, elle vérifie le système d’exploitation utilisé et exploite cette information pour créer un objet de la fabrique qui y correspond. Cette fabrique est ensuite utilisée pour générer tout le reste des éléments de l’UI, ce qui évite les erreurs.</p><p>Grâce à cette approche, tant qu’il utilise leurs interfaces abstraites, le code client ne dépend plus des classes concrètes de la fabrique et des éléments de l’UI. Cela lui permet également d’exploiter les nouveaux éléments de l’UI ou les fabriques que vous pourriez ajouter dans le futur.</p><p>Nous n’avons ainsi plus besoin de modifier le code client à chaque nouvel élément de l’interface utilisateur que vous voulez ajouter dans votre application. Vous devrez simplement créer une nouvelle classe fabrique produisant ces éléments et apporter quelques modifications au code d’initialisation afin qu’il choisisse la classe appropriée.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span><span class=lnt>96
</span><span class=lnt>97
</span><span class=lnt>98
</span><span class=lnt>99
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// L’interface de la fabrique abstraite déclare un ensemble de
</span></span><span class=line><span class=cl>// méthodes qui retournent différents produits abstraits. Ces
</span></span><span class=line><span class=cl>// produits font partie de ce que l’on appelle une famille et
</span></span><span class=line><span class=cl>// sont reliés par un concept ou un thème de haut niveau. Les
</span></span><span class=line><span class=cl>// produits d’une famille sont généralement capables de
</span></span><span class=line><span class=cl>// collaborer les uns avec les autres. Une famille de produits
</span></span><span class=line><span class=cl>// peut avoir plusieurs variantes, mais les produits d’une
</span></span><span class=line><span class=cl>// variante ne sont pas compatibles avec les produits d’une
</span></span><span class=line><span class=cl>// autre.
</span></span><span class=line><span class=cl>interface GUIFactory is
</span></span><span class=line><span class=cl>    method createButton():Button
</span></span><span class=line><span class=cl>    method createCheckbox():Checkbox
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Les fabriques concrètes construisent une famille de produits
</span></span><span class=line><span class=cl>// qui appartiennent à une seule variante. La fabrique garantit
</span></span><span class=line><span class=cl>// la compatibilité des produits qui en sortent. Les signatures
</span></span><span class=line><span class=cl>// des méthodes des fabriques concrètes renvoient un produit
</span></span><span class=line><span class=cl>// abstrait, et à l’intérieur de la méthode, un produit concret
</span></span><span class=line><span class=cl>// est instancié.
</span></span><span class=line><span class=cl>class WinFactory implements GUIFactory is
</span></span><span class=line><span class=cl>    method createButton():Button is
</span></span><span class=line><span class=cl>        return new WinButton()
</span></span><span class=line><span class=cl>    method createCheckbox():Checkbox is
</span></span><span class=line><span class=cl>        return new WinCheckbox()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Chaque fabrique concrète possède une variante de produit
</span></span><span class=line><span class=cl>// correspondante.
</span></span><span class=line><span class=cl>class MacFactory implements GUIFactory is
</span></span><span class=line><span class=cl>    method createButton():Button is
</span></span><span class=line><span class=cl>        return new MacButton()
</span></span><span class=line><span class=cl>    method createCheckbox():Checkbox is
</span></span><span class=line><span class=cl>        return new MacCheckbox()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Chaque produit d’une famille de produits doit avoir une
</span></span><span class=line><span class=cl>// interface de base. Toutes les variantes du produit doivent
</span></span><span class=line><span class=cl>// implémenter cette interface.
</span></span><span class=line><span class=cl>interface Button is
</span></span><span class=line><span class=cl>    method paint()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Les produits concrets sont créés par les fabriques concrètes
</span></span><span class=line><span class=cl>// correspondantes.
</span></span><span class=line><span class=cl>class WinButton implements Button is
</span></span><span class=line><span class=cl>    method paint() is
</span></span><span class=line><span class=cl>        // Affiche un bouton avec le style Windows.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MacButton implements Button is
</span></span><span class=line><span class=cl>    method paint() is
</span></span><span class=line><span class=cl>        // Affiche un bouton avec le style macOS.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Voici l’interface de base d’un autre produit. Tous les
</span></span><span class=line><span class=cl>// produits peuvent interagir les uns avec les autres, mais les
</span></span><span class=line><span class=cl>// interactions adéquates devraient être implémentées de
</span></span><span class=line><span class=cl>// préférence entre les produits d’une même variante concrète.
</span></span><span class=line><span class=cl>interface Checkbox is
</span></span><span class=line><span class=cl>    method paint()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class WinCheckbox implements Checkbox is
</span></span><span class=line><span class=cl>    method paint() is
</span></span><span class=line><span class=cl>        // Affiche une case à cocher avec le style Windows.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MacCheckbox implements Checkbox is
</span></span><span class=line><span class=cl>    method paint() is
</span></span><span class=line><span class=cl>        // Affiche une case à cocher avec le style macOS.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Le code client travaille uniquement avec les types abstraits
</span></span><span class=line><span class=cl>// des fabriques et des produits : FabriqueGUI, Bouton et
</span></span><span class=line><span class=cl>// CaseÀCocher. Ceci vous permet d’envoyer n’importe quelle
</span></span><span class=line><span class=cl>// sous-classe de fabrique ou de produit au code client sans
</span></span><span class=line><span class=cl>// toucher à son code.
</span></span><span class=line><span class=cl>class Application is
</span></span><span class=line><span class=cl>    private field factory: GUIFactory
</span></span><span class=line><span class=cl>    private field button: Button
</span></span><span class=line><span class=cl>    constructor Application(factory: GUIFactory) is
</span></span><span class=line><span class=cl>        this.factory = factory
</span></span><span class=line><span class=cl>    method createUI() is
</span></span><span class=line><span class=cl>        this.button = factory.createButton()
</span></span><span class=line><span class=cl>    method paint() is
</span></span><span class=line><span class=cl>        button.paint()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// L’application choisit le type de la fabrique en fonction de
</span></span><span class=line><span class=cl>// la configuration actuelle ou des paramètres d’environnement,
</span></span><span class=line><span class=cl>// et la crée à l’exécution (en général lors de la phase
</span></span><span class=line><span class=cl>// d’initialisation).
</span></span><span class=line><span class=cl>class ApplicationConfigurator is
</span></span><span class=line><span class=cl>    method main() is
</span></span><span class=line><span class=cl>        config = readApplicationConfigFile()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        if (config.OS == &#34;Windows&#34;) then
</span></span><span class=line><span class=cl>            factory = new WinFactory()
</span></span><span class=line><span class=cl>        else if (config.OS == &#34;Mac&#34;) then
</span></span><span class=line><span class=cl>            factory = new MacFactory()
</span></span><span class=line><span class=cl>        else
</span></span><span class=line><span class=cl>            throw new Exception(&#34;Error! Unknown operating system.&#34;)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        Application app = new Application(factory)
</span></span></code></pre></td></tr></table></div></div><a href=#possibilités-dapplication><h2 id=possibilités-dapplication><span class=hanchor arialabel=Anchor># </span>Possibilités d’application</h2></a><p>Utilisez la fabrique abstraite si votre code a besoin de manipuler des produits d’un même thème, mais que vous ne voulez pas qu’il dépende des classes concrètes de ces produits — soit vous ne les connaissez pas encore, soit vous voulez juste rendre votre code évolutif.</p><p>La fabrique abstraite fournit une interface qui permet de créer des objets pour chaque classe de la famille de produits. Tant que votre code utilise cette interface pour créer ses objets, il prendra systématiquement les bonnes variantes des produits disponibles dans votre application.</p><ul><li><p>Étudiez la possibilité d’utiliser la fabrique abstraite lorsqu’une classe se retrouve avec un ensemble de patrons
<a href=https://refactoring.guru/fr/design-patterns/factory-method rel=noopener>Fabrique</a> qui occultent sa fonction principale.</p></li><li><p>Dans un programme bien conçu <em>chaque classe n’a qu’une seule responsabilité</em>. Lorsqu’une classe gère plusieurs types de produits, déplacer les méthodes fabrique dans des fabriques individuelles ou dans une implémentation à part entière d’une fabrique abstraite est souvent plus pratique.</p></li></ul><a href=#mise-en-œuvre><h2 id=mise-en-œuvre><span class=hanchor arialabel=Anchor># </span>Mise en œuvre</h2></a><ol><li><p>Établissez une matrice de vos différents types de produits et leurs variantes.</p></li><li><p>Déclarez des interfaces abstraites pour tous vos types de produits. Mettez en place vos produits concrets dans des classes qui implémentent ces interfaces.</p></li><li><p>Déclarez une interface abstraite de la fabrique avec un ensemble de méthodes de création pour tous les produits abstraits.</p></li><li><p>Implémentez une classe fabrique concrète pour chaque variante des produits.</p></li><li><p>Insérez le code de l’initialisation de la fabrique quelque part dans votre application. Il doit instancier une des fabriques concrètes en fonction de la configuration de l’application ou de l’environnement d’exécution. Passez cette fabrique à toutes les classes qui construisent des produits.</p></li><li><p>Parcourez votre code et repérez tous les appels aux constructeurs des produits. Remplacez-les par des appels à la méthode de création appropriée de la fabrique.</p></li></ol><a href=#avantages-et-inconvénients><h2 id=avantages-et-inconvénients><span class=hanchor arialabel=Anchor># </span>Avantages et inconvénients</h2></a><ul><li><p>Vous êtes assurés que les produits d’une fabrique sont compatibles entre eux.</p></li><li><p>Vous découplez le code client des produits concrets.</p></li><li><p><em>Principe de responsabilité unique</em>. Vous pouvez déplacer tout le code de création des produits au même endroit, pour une meilleure maintenabilité.</p></li><li><p><em>Principe ouvert/fermé</em>. Vous pouvez ajouter de nouvelles variantes de produits sans endommager l’existant.</p></li><li><p>Le code peut devenir plus complexe que nécessaire, car ce patron de conception impose l’ajout de nouvelles classes et interfaces.</p></li></ul><a href=#liens-avec-les-autres-patrons><h2 id=liens-avec-les-autres-patrons><span class=hanchor arialabel=Anchor># </span>Liens avec les autres patrons</h2></a><ul><li><p>La
<a href=https://refactoring.guru/fr/design-patterns/factory-method rel=noopener>Fabrique</a> est souvent utilisée dès le début de la conception (moins compliquée et plus personnalisée grâce aux sous-classes) et évolue vers la
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabrique abstraite</a>, le
<a href=https://refactoring.guru/fr/design-patterns/prototype rel=noopener>Prototype</a>, ou le
<a href=https://refactoring.guru/fr/design-patterns/builder rel=noopener>Monteur</a> (ce dernier étant plus flexible, mais plus compliqué).</p></li><li><p>Le
<a href=https://refactoring.guru/fr/design-patterns/builder rel=noopener>Monteur</a> se concentre sur la construction d’objets complexes étape par étape. La
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabrique abstraite</a> se spécialise dans la création de familles d’objets associés. La <em>fabrique abstraite</em> retourne le produit immédiatement, alors que le <em>monteur</em> vous permet de lancer des étapes supplémentaires avant de récupérer le produit.</p></li><li><p>Les classes
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabrique abstraite</a> sont souvent basées sur un ensemble de
<a href=https://refactoring.guru/fr/design-patterns/factory-method rel=noopener>Fabriques</a>, mais vous pouvez également utiliser le
<a href=https://refactoring.guru/fr/design-patterns/prototype rel=noopener>Prototype</a> pour écrire leurs méthodes.</p></li><li><p>La
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabrique abstraite</a> peut remplacer la
<a href=https://refactoring.guru/fr/design-patterns/facade rel=noopener>Façade</a> si vous voulez simplement cacher au code client la création des objets du sous-système.</p></li><li><p>Vous pouvez utiliser la
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabrique abstraite</a> avec le
<a href=https://refactoring.guru/fr/design-patterns/bridge rel=noopener>Pont</a>. Ce couple est très utile quand les abstractions définies par le <em>pont</em> ne fonctionnent qu’avec certaines implémentations spécifiques. Dans ce cas, la <em>fabrique abstraite</em> peut encapsuler ces relations et cacher la complexité au code client.</p></li><li><p>Les
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabriques abstraites</a>,
<a href=https://refactoring.guru/fr/design-patterns/builder rel=noopener>Monteurs</a> et
<a href=https://refactoring.guru/fr/design-patterns/prototype rel=noopener>Prototypes</a> peuvent tous être implémentés comme des
<a href=https://refactoring.guru/fr/design-patterns/singleton rel=noopener>Singletons</a>.</p></li></ul><a href=#exemples-de-code><h2 id=exemples-de-code><span class=hanchor arialabel=Anchor># </span>Exemples de code</h2></a><p><a href=https://refactoring.guru/fr/design-patterns/abstract-factory/java/example rel=noopener><img width=43 height=56 src=../../_resources/java_6484e190e78d4f02bf2fde813a41c0fc.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/csharp/example rel=noopener><img width=43 height=56 src=../../_resources/csharp_6570c0a1dda74ede82de63f6d81e541f.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/cpp/example rel=noopener><img width=43 height=56 src=../../_resources/cpp_020869490e0a4f4a934ca702ef1412b1.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/php/example rel=noopener><img width=43 height=56 src=../../_resources/php_5b81defad14d4ff8bb0b0951aefc10c8.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/python/example rel=noopener><img width=43 height=56 src=../../_resources/python_e16527be71274dc89282f52e2b7f5764.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/ruby/example rel=noopener><img width=43 height=56 src=../../_resources/ruby_0ea3de41c7af4022bfca5b75c1203aff.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/swift/example rel=noopener><img width=43 height=56 src=../../_resources/swift_d90b59204f3a4a7293a77b01fd5569ff.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/typescript/example rel=noopener><img width=43 height=56 src=../../_resources/typescript_759668b881a046e7883e80f949b3743b.svg class=jop-noMdConv></a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory/go/example rel=noopener><img width=43 height=56 src=../../_resources/go_0c0910284e9c46438644811c640cb3c3.svg class=jop-noMdConv></a></p><a href=#informations-supplémentaires><h2 id=informations-supplémentaires><span class=hanchor arialabel=Anchor># </span>Informations supplémentaires</h2></a><ul><li>Lisez notre
<a href=https://refactoring.guru/fr/design-patterns/factory-comparison rel=noopener>Comparaison des fabriques</a> pour en savoir plus sur la différence entre les divers patrons et concepts.</li></ul><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener><img width=200 height=200 src=../../_resources/patterns-book-banner-3_9f025e7f78904866ac03dc5e816.png class=jop-noMdConv></a></p><a href=#soutenez-notre-site-gratuit-et-obtenez-lebook><h3 id=soutenez-notre-site-gratuit-et-obtenez-lebook><span class=hanchor arialabel=Anchor># </span>Soutenez notre site gratuit et obtenez l’ebook !</h3></a><ul><li>22 patrons de conception et 8 principes expliqués en profondeur.</li><li>444 pages de vulgarisation, bien structurées et faciles à lire.</li><li>225 illustrations et diagrammes clairs pour aider à la compréhension.</li><li>Une archive avec des exemples de code dans 9 langages.</li><li>Tous les appareils sont pris en charge : formats PDF/EPUB/MOBI/KFX.</li></ul><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener>En savoir plus…</a></p><a href=#suivant><h4 id=suivant><span class=hanchor arialabel=Anchor># </span>Suivant</h4></a><p><a href=https://refactoring.guru/fr/design-patterns/factory-comparison rel=noopener>Comparaison des fabriques</a></p><a href=#retour><h4 id=retour><span class=hanchor arialabel=Anchor># </span>Retour</h4></a><p><a href=https://refactoring.guru/fr/design-patterns/factory-method rel=noopener>Fabrique</a></p><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener><img width=245 height=375 src=../../_resources/web-cover-fr_d607e2ca64e54a30ab7e1e2a93abff3f.png class=jop-noMdConv></a></p><p>Cet article est tiré de notre ebook
<strong>Plongée au cœur des
PATRONS DE CONCEPTION</strong></p><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener>En savoir plus…</a></p><p>Facebook</p><p>Twitter</p><ul><li><a href="https://feedback.refactoring.guru/?lang=en&show_feedback_form_private=true" rel=noopener>Nous contacter</a></li><li><a href=https://refactoring.guru/fr/login rel=noopener>Connexion</a></li></ul><p><a href=https://refactoring.guru/design-patterns/abstract-factory rel=noopener>English</a>
<a href=https://refactoring.guru/es/design-patterns/abstract-factory rel=noopener>Español</a>
<a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Français</a>
<a href=https://refactoring.guru/pl/design-patterns/abstract-factory rel=noopener>Polski</a>
<a href=https://refactoring.guru/pt-br/design-patterns/abstract-factory rel=noopener>Português-Br</a>
<a href=https://refactoring.guru/ru/design-patterns/abstract-factory rel=noopener>Русский</a>
<a href=https://refactoring.guru/uk/design-patterns/abstract-factory rel=noopener>Українська</a>
<a href=https://refactoringguru.cn/design-patterns/abstract-factory rel=noopener>中文</a></p><p><a href=https://refactoring.guru/fr rel=noopener><img src=https://deuxfois.github.io/quartz//../../_resources/logo-covid-winter_c9f9ab409ae24cd19ab33160bea70e0d.png width=auto alt=Refactoring.Guru></a></p><p><img src=https://deuxfois.github.io/quartz//../../_resources/winter-hat_b3fd1218723f48a68bd81bd9e65cd053.png width=auto alt></p><ul><li><a href=https://refactoring.guru/fr/store rel=noopener>Contenu premium</a></li><li><a href=https://refactoring.guru/fr/design-patterns rel=noopener>Patrons de conception</a><ul><li><a href=https://refactoring.guru/fr/design-patterns/what-is-pattern rel=noopener>Introduction</a></li><li><a href=https://refactoring.guru/fr/design-patterns/catalog rel=noopener>Catalogue</a></li><li><a href=https://refactoring.guru/fr/design-patterns/creational-patterns rel=noopener>Patrons de création</a><ul><li><a href=https://refactoring.guru/fr/design-patterns/factory-method rel=noopener>Fabrique</a></li><li><a href=https://refactoring.guru/fr/design-patterns/abstract-factory rel=noopener>Fabrique abstraite</a></li><li><a href=https://refactoring.guru/fr/design-patterns/builder rel=noopener>Monteur</a></li><li><a href=https://refactoring.guru/fr/design-patterns/prototype rel=noopener>Prototype</a></li><li><a href=https://refactoring.guru/fr/design-patterns/singleton rel=noopener>Singleton</a></li></ul></li><li><a href=https://refactoring.guru/fr/design-patterns/structural-patterns rel=noopener>Patrons structurels</a></li><li><a href=https://refactoring.guru/fr/design-patterns/behavioral-patterns rel=noopener>Patrons comportementaux</a></li><li><a href=https://refactoring.guru/fr/design-patterns/examples rel=noopener>Exemples de code</a></li></ul></li><li><a href=https://refactoring.guru/fr/refactoring rel=noopener>Refactorisation (commenter bientôt)</a></li></ul><p><a href=https://refactoring.guru/fr/login rel=noopener>Connexion</a>
<a href="https://feedback.refactoring.guru/?lang=en" rel=noopener>Nous contacter</a></p><ul><li><a href=https://refactoring.guru/fr rel=noopener>Accueil</a></li><li><a href=https://refactoring.guru/fr/refactoring rel=noopener>Refactorisation</a></li><li><a href=https://refactoring.guru/fr/design-patterns rel=noopener>Patrons de conception</a></li><li><a href=https://refactoring.guru/fr/store rel=noopener>Contenu premium</a></li><li><a href="https://feedback.refactoring.guru/?lang=en" rel=noopener>Forum</a></li><li><a href="https://feedback.refactoring.guru/?lang=en&show_feedback_form_private=true" rel=noopener>Nous contacter</a></li></ul><p>2014-2021
<a href=https://refactoring.guru/fr rel=noopener>Refactoring.Guru</a>. Tous droits réservés.
<img src=https://deuxfois.github.io/quartz//../../_resources/fa-building_284223436a504539866b7b608b9330a1.svg width=auto alt="Organization address"> Khmelnitske shosse 19 / 27, Kamianets-Podilskyi, Ukraine, 32305
Email:
<a rel=noopener class="internal-link broken" data-src=mailto:support@refactoring.guru>support@refactoring.guru</a></p><p>Illustrations par
<a href=http://zhart.us/ rel=noopener>Dmitry Zhart</a></p><ul><li><a href=https://refactoring.guru/fr/terms rel=noopener>Termes et conditions</a></li><li><a href=https://refactoring.guru/fr/privacy-policy rel=noopener>Politique de protection de la vie privée</a></li><li><a href=https://refactoring.guru/fr/content-usage-policy rel=noopener>Politique de l’utilisation des données</a></li></ul></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://deuxfois.github.io/quartz/js/graph.243ea0d4fc79317e06f846bd698ba136.js></script></div></div><div id=contact_buttons><footer><p>Made by DeuxFois using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2022</p><ul><li><a href=https://deuxfois.github.io/quartz/>Home</a></li><li><a href=https://twitter.com/_jzhao>Twitter</a></li><li><a href=https://github.com/jackyzha0>Github</a></li></ul></footer></div></div></body></html>