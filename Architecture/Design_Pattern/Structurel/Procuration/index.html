<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="La Procuration qui vous permet dâ€™utiliser un substitut pour un objet. Elle donne le contrÃ´le sur lâ€™objet original, vous permettant dâ€™effectuer des manipulations avant ou aprÃ¨s que la demande ne luiÂ parvienne."><title>Procuration / Proxy</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://deuxfois.github.io/quartz//icon.png><link href=https://deuxfois.github.io/quartz/styles.b54f56dc7e7fdf6be9a4427dc6b0509b.min.css rel=stylesheet><link href=https://deuxfois.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://deuxfois.github.io/quartz/js/darkmode.69b2c08ae0f08c3a3f86259a122e1f06.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/util.39f53d45cb9520bdaf946bd063598b19.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://deuxfois.github.io/quartz/js/popover.37b1455b8f0603154072b9467132c659.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://deuxfois.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://deuxfois.github.io/quartz/",fetchData=Promise.all([fetch("https://deuxfois.github.io/quartz/indices/linkIndex.3df01290fdc158a4687bc6daff285251.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://deuxfois.github.io/quartz/indices/contentIndex.0a89884b6962d6dd0a587d66119a8c09.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL(BASE_URL),s=n.pathname,o=window.location.pathname,i=s==o;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts();const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!0;drawGraph("https://deuxfois.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://deuxfois.github.io/quartz",!0,!0)},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/deuxfois.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://deuxfois.github.io/quartz/js/full-text-search.0ec5fb908204b9e13989f2c640c0870b.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://deuxfois.github.io/quartz/>ğŸª´ Quartz 3.2</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Procuration / Proxy</h1><p class=meta>Last updated
Aug 2, 2022
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/Architecture/Design_Pattern/Structurel/Procuration.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://deuxfois.github.io/quartz/tags/design_pattern/>Design pattern</a></li><li><a href=https://deuxfois.github.io/quartz/tags/structurel/>Structurel</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#problÃ¨me>ProblÃ¨me</a></li><li><a href=#solution>Solution</a></li><li><a href=#analogie>Analogie</a></li><li><a href=#structure>Structure</a></li><li><a href=#pseudo-code>Pseudo-code</a></li><li><a href=#possibilitÃ©s-dapplication>PossibilitÃ©s dâ€™application</a></li><li><a href=#mise-en-Å“uvre>Mise en Å“uvre</a></li><li><a href=#avantages-et-inconvÃ©nients>Avantages et inconvÃ©nients</a></li><li><a href=#liens-avec-les-autres-patrons>Liens avec les autres patrons</a></li><li><a href=#exemples-de-code>Exemples de code</a><ol><li><a href=#soutenez-notre-site-gratuit-et-obtenez-lebook>Soutenez notre site gratuit et obtenez lâ€™ebookâ€¯!</a></li></ol></li></ol></nav></details></aside><p>La <strong>Procuration</strong> qui vous permet dâ€™utiliser un substitut pour un objet. Elle donne le contrÃ´le sur lâ€™objet original, vous permettant dâ€™effectuer des manipulations avant ou aprÃ¨s que la demande ne luiÂ parvienne.</p><p><img src=https://deuxfois.github.io/quartz//../../_resources/proxy_8bec69d3da76480da2d3e7595a0dd136.png width=auto alt="Patron de conceptionÂ procuration"></p><a href=#problÃ¨me><h2 id=problÃ¨me><span class=hanchor arialabel=Anchor># </span>ProblÃ¨me</h2></a><p>Pourquoi vouloir maÃ®triser lâ€™accÃ¨s Ã  un objetâ€¯? Voici un exempleÂ : vous avez un Ã©norme objet qui consomme beaucoup de ressources, mais vous nâ€™en avez besoin que de temps en temps.</p><p><img src=https://deuxfois.github.io/quartz//../../_resources/problem-fr_4516c5a9474b418cb15ebc4ea43160bb.png width=auto alt="ProblÃ¨me rÃ©solu grÃ¢ce au patron de conception procuration"></p><p>Les requÃªtes sur la base de donnÃ©es sont parfois trÃ¨sÂ lentes.</p><p>Vous pouvez recourir Ã  lâ€™instanciation paresseuseÂ : crÃ©er lâ€™objet uniquement lorsque vous en avez besoin. Vous devrez implÃ©menter une initialisation diffÃ©rÃ©e dans tous les clients pour lâ€™objet concernÃ©. Malheureusement, vous allez vous retrouver avec beaucoup de code dupliquÃ©.</p><p>Dans le meilleur des mondes, nous voudrions mettre ce code directement dans la classe de lâ€™objet, mais ce nâ€™est pas toujours possible. La classe pourrait par exemple faire partie dâ€™une application externe non modifiable.</p><a href=#solution><h2 id=solution><span class=hanchor arialabel=Anchor># </span>Solution</h2></a><p>Ce patron de conception vous propose de crÃ©er une classe procuration qui a la mÃªme interface que lâ€™objet du service original. Vous passez ensuite lâ€™objet procuration Ã  tous les clients de lâ€™objet original. Lors de la rÃ©ception dâ€™une demande dâ€™un client, la procuration crÃ©e lâ€™objet du service original et lui dÃ©lÃ¨gue la tÃ¢che.</p><img width=510 height=0 src=../../_resources/solution-fr_d108a79cf5f0490d9ebed8f7e2bfa2d3.png><p>La procuration se dÃ©guise en objet base de donnÃ©es. Elle peut gÃ©rer lâ€™instanciation paresseuse et mettre en cache le rÃ©sultat sans que le client ou que lâ€™objet de la base de donnÃ©es ne leÂ remarque.</p><p>Mais quel est son intÃ©rÃªtâ€¯? Si vous voulez lancer un traitement avant ou aprÃ¨s avoir appliquÃ© la logique principale de la classe, la procuration peut intervenir sans modifier cette derniÃ¨re. Elle implÃ©mente la mÃªme interface que la classe originale, et peut donc Ãªtre passÃ©e en paramÃ¨tre Ã  nâ€™importe quel client qui attend lâ€™objet du service original.</p><a href=#analogie><h2 id=analogie><span class=hanchor arialabel=Anchor># </span>Analogie</h2></a><img width=540 height=0 src=../../_resources/live-example_9e4ab5179b8f478297bf488e9c063341.png><p>Une carte de crÃ©dit peut Ãªtre utilisÃ©e au mÃªme titre que de lâ€™argentÂ liquide.</p><p>Une carte de crÃ©dit est une procuration pour un compte bancaire, qui est une procuration pour une liasse de billets. Ils implÃ©mentent la mÃªme interfaceÂ : tous deux peuvent Ãªtre utilisÃ©s pour effectuer un paiement. Le consommateur apprÃ©cie grandement, car il nâ€™a pas besoin de garder une grosse somme en liquide sur lui. Le commerÃ§ant est Ã©galement trÃ¨s heureux, car les transactions sont versÃ©es Ã©lectroniquement vers son compte en banque, sans courir le risque dâ€™Ã©garer son dÃ©pÃ´t ou de se le faire voler sur le chemin de la banque.</p><a href=#structure><h2 id=structure><span class=hanchor arialabel=Anchor># </span>Structure</h2></a><img width=370 height=0 src=../../_resources/structure_7ec857c0c80941b8af769751a190a5dc.png><ol><li><p>Lâ€™<strong>Interface Service</strong> dÃ©clare lâ€™interface du service. La procuration doit implÃ©menter cette interface afin de pouvoir se dÃ©guiser en objet du service.</p></li><li><p>Le <strong>Service</strong> est une classe qui fournit la logique mÃ©tier dont vous voulez vous servir.</p></li><li><p>La <strong>Procuration</strong> est une classe dotÃ©e dâ€™un attribut qui pointe vers un objet service. Une fois que la procuration a lancÃ© tous ses traitements (instanciation paresseuse, historisation des logs, vÃ©rification des droits, mise en cache, etc.), elle envoie la demande Ã  lâ€™objet du service.</p><p>En gÃ©nÃ©ral, les procurations gÃ¨rent le cycle de vie de leurs objets service.</p></li><li><p>Le <strong>Client</strong> passe par la mÃªme interface pour travailler avec les services et les procurations. Il est ainsi possible de passer une procuration Ã  nâ€™importe quel code qui attend un objet service.</p></li></ol><a href=#pseudo-code><h2 id=pseudo-code><span class=hanchor arialabel=Anchor># </span>Pseudo-code</h2></a><p>Lâ€™exemple suivant montre comment le patron de conception <strong>Procuration</strong> nous aide Ã  utiliser lâ€™instanciation paresseuse et la mise en cache pour intÃ©grer une librairie YouTube externe.</p><img width=490 height=0 src=../../_resources/example_d6dd498295c04089bc59f6341952feb2.png><p>RÃ©sultats obtenus pour la mise en cache dâ€™un service Ã  lâ€™aide dâ€™uneÂ procuration.</p><p>La librairie nous fournit une classe pour tÃ©lÃ©charger des vidÃ©os. Malheureusement, elle nâ€™est pas trÃ¨s efficace. Si lâ€™application client demande une mÃªme vidÃ©o Ã  plusieurs reprises, la librairie va la tÃ©lÃ©charger encore et encore, plutÃ´t que de la mettre en cache aprÃ¨s la premiÃ¨re utilisation.</p><p>La classe procuration implÃ©mente la mÃªme interface que lâ€™outil de tÃ©lÃ©chargement original et dÃ©lÃ¨gue tout le travail Ã  ce dernier. En revanche, elle garde la trace de tous les fichiers tÃ©lÃ©chargÃ©s et retourne les donnÃ©es du cache lorsque lâ€™application fait plusieurs fois appel Ã  la mÃªme vidÃ©o.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=o>//</span><span class=w> </span><span class=n>L</span><span class=err>â€™</span><span class=n>interface</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>un</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=n>distant</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>interface</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>listVideos</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>getVideoInfo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>downloadVideo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>La</span><span class=w> </span><span class=n>mÃ©thode</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>implÃ©mentation</span><span class=w> </span><span class=n>concrÃ¨te</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>un</span><span class=w> </span><span class=n>connecteur</span><span class=w> </span><span class=n>de</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=w> </span><span class=n>Les</span><span class=w> </span><span class=n>mÃ©thodes</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>cette</span><span class=w> </span><span class=n>classe</span><span class=w> </span><span class=n>peuvent</span><span class=w> </span><span class=n>demander</span><span class=w> </span><span class=n>des</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>informations</span><span class=w> </span><span class=err>Ã </span><span class=w> </span><span class=n>YouTube</span><span class=p>.</span><span class=w> </span><span class=n>La</span><span class=w> </span><span class=n>vitesse</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>demande</span><span class=w> </span><span class=n>dÃ©pend</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>la</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>connexion</span><span class=w> </span><span class=n>Internet</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>l</span><span class=err>â€™</span><span class=n>utilisateur</span><span class=p>,</span><span class=w> </span><span class=n>ainsi</span><span class=w> </span><span class=n>que</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>celle</span><span class=w> </span><span class=n>de</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>YouTube</span><span class=p>.</span><span class=w> </span><span class=n>L</span><span class=err>â€™</span><span class=n>application</span><span class=w> </span><span class=n>sera</span><span class=w> </span><span class=n>plus</span><span class=w> </span><span class=n>lente</span><span class=w> </span><span class=n>si</span><span class=w> </span><span class=n>plusieurs</span><span class=w> </span><span class=n>demandes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>sont</span><span class=w> </span><span class=n>envoyÃ©es</span><span class=w> </span><span class=n>en</span><span class=w> </span><span class=n>mÃªme</span><span class=w> </span><span class=n>temps</span><span class=p>,</span><span class=w> </span><span class=n>mÃªme</span><span class=w> </span><span class=n>si</span><span class=w> </span><span class=n>elles</span><span class=w> </span><span class=n>recherchent</span><span class=w> </span><span class=n>les</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>mÃªmes</span><span class=w> </span><span class=n>informations</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>class</span><span class=w> </span><span class=n>ThirdPartyYouTubeClass</span><span class=w> </span><span class=n>implements</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>listVideos</span><span class=p>()</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>//</span><span class=w> </span><span class=n>Envoie</span><span class=w> </span><span class=n>une</span><span class=w> </span><span class=n>demande</span><span class=w> </span><span class=n>via</span><span class=w> </span><span class=n>une</span><span class=w> </span><span class=n>API</span><span class=w> </span><span class=err>Ã </span><span class=w> </span><span class=n>YouTube</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>getVideoInfo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>//</span><span class=w> </span><span class=n>RÃ©cupÃ¨re</span><span class=w> </span><span class=n>les</span><span class=w> </span><span class=n>mÃ©tadonnÃ©es</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>une</span><span class=w> </span><span class=n>vidÃ©o</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>downloadVideo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>//</span><span class=w> </span><span class=n>TÃ©lÃ©charge</span><span class=w> </span><span class=n>un</span><span class=w> </span><span class=n>fichier</span><span class=w> </span><span class=n>vidÃ©o</span><span class=w> </span><span class=n>sur</span><span class=w> </span><span class=n>YouTube</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>Pour</span><span class=w> </span><span class=err>Ã©</span><span class=n>conomiser</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>bande</span><span class=w> </span><span class=n>passante</span><span class=p>,</span><span class=w> </span><span class=n>nous</span><span class=w> </span><span class=n>pouvons</span><span class=w> </span><span class=n>mettre</span><span class=w> </span><span class=n>en</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>cache</span><span class=w> </span><span class=n>les</span><span class=w> </span><span class=n>rÃ©sultats</span><span class=w> </span><span class=n>des</span><span class=w> </span><span class=n>demandes</span><span class=w> </span><span class=n>et</span><span class=w> </span><span class=n>les</span><span class=w> </span><span class=n>mettre</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>cÃ´tÃ©</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>temporairement</span><span class=p>.</span><span class=w> </span><span class=n>Mais</span><span class=w> </span><span class=n>vous</span><span class=w> </span><span class=n>n</span><span class=err>â€™</span><span class=n>allez</span><span class=w> </span><span class=n>pas</span><span class=w> </span><span class=n>forcÃ©ment</span><span class=w> </span><span class=n>pouvoir</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=err>Ã©</span><span class=n>crire</span><span class=w> </span><span class=n>ce</span><span class=w> </span><span class=n>code</span><span class=w> </span><span class=n>directement</span><span class=w> </span><span class=n>dans</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>classe</span><span class=w> </span><span class=n>du</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=w> </span><span class=n>Elle</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>pourrait</span><span class=w> </span><span class=n>provenir</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>une</span><span class=w> </span><span class=n>librairie</span><span class=w> </span><span class=n>externe</span><span class=w> </span><span class=n>ou</span><span class=w> </span><span class=n>avoir</span><span class=w> </span><span class=err>Ã©</span><span class=n>tÃ©</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>dÃ©finie</span><span class=w> </span><span class=n>comme</span><span class=w> </span><span class=o>`</span><span class=n>final</span><span class=o>`</span><span class=p>.</span><span class=w> </span><span class=n>Pour</span><span class=w> </span><span class=n>cette</span><span class=w> </span><span class=n>raison</span><span class=p>,</span><span class=w> </span><span class=n>nous</span><span class=w> </span><span class=err>Ã©</span><span class=n>crivons</span><span class=w> </span><span class=n>le</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>code</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>mise</span><span class=w> </span><span class=n>en</span><span class=w> </span><span class=n>cache</span><span class=w> </span><span class=n>dans</span><span class=w> </span><span class=n>une</span><span class=w> </span><span class=n>nouvelle</span><span class=w> </span><span class=n>classe</span><span class=w> </span><span class=n>procuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>qui</span><span class=w> </span><span class=n>implÃ©mente</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>mÃªme</span><span class=w> </span><span class=n>interface</span><span class=w> </span><span class=n>que</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>classe</span><span class=w> </span><span class=n>du</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>Elle</span><span class=w> </span><span class=n>dÃ©lÃ¨gue</span><span class=w> </span><span class=n>les</span><span class=w> </span><span class=n>tÃ¢ches</span><span class=w> </span><span class=err>Ã </span><span class=w> </span><span class=n>l</span><span class=err>â€™</span><span class=n>objet</span><span class=w> </span><span class=n>du</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=n>lorsque</span><span class=w> </span><span class=n>les</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>demandes</span><span class=w> </span><span class=n>doivent</span><span class=w> </span><span class=n>vraiment</span><span class=w> </span><span class=err>Ãª</span><span class=n>tre</span><span class=w> </span><span class=n>envoyÃ©es</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>class</span><span class=w> </span><span class=n>CachedYouTubeClass</span><span class=w> </span><span class=n>implements</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>private</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=n>service</span><span class=p>:</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>private</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=n>listCache</span><span class=p>,</span><span class=w> </span><span class=n>videoCache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>field</span><span class=w> </span><span class=n>needReset</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>constructor</span><span class=w> </span><span class=nf>CachedYouTubeClass</span><span class=p>(</span><span class=n>service</span><span class=p>:</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>this</span><span class=p>.</span><span class=n>service</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>listVideos</span><span class=p>()</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>listCache</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=no>null</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>needReset</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>listCache</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=nf>listVideos</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>listCache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>getVideoInfo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>videoCache</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=no>null</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>needReset</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>videoCache</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=nf>getVideoInfo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>videoCache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>downloadVideo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nf>downloadExists</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>needReset</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>service</span><span class=p>.</span><span class=nf>downloadVideo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>La</span><span class=w> </span><span class=n>classe</span><span class=w> </span><span class=n>GUI</span><span class=w> </span><span class=n>qui</span><span class=w> </span><span class=n>fonctionnait</span><span class=w> </span><span class=n>auparavant</span><span class=w> </span><span class=n>avec</span><span class=w> </span><span class=n>un</span><span class=w> </span><span class=n>objet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>Service</span><span class=w> </span><span class=n>n</span><span class=err>â€™</span><span class=n>a</span><span class=w> </span><span class=n>pas</span><span class=w> </span><span class=n>besoin</span><span class=w> </span><span class=n>d</span><span class=err>â€™Ãª</span><span class=n>tre</span><span class=w> </span><span class=n>modifiÃ©e</span><span class=w> </span><span class=n>tant</span><span class=w> </span><span class=n>qu</span><span class=err>â€™</span><span class=n>elle</span><span class=w> </span><span class=n>interagit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>avec</span><span class=w> </span><span class=n>lui</span><span class=w> </span><span class=n>par</span><span class=w> </span><span class=n>le</span><span class=w> </span><span class=n>biais</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>une</span><span class=w> </span><span class=n>interface</span><span class=p>.</span><span class=w> </span><span class=n>Nous</span><span class=w> </span><span class=n>pouvons</span><span class=w> </span><span class=n>passer</span><span class=w> </span><span class=n>en</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>toute</span><span class=w> </span><span class=n>sÃ©curitÃ©</span><span class=w> </span><span class=n>un</span><span class=w> </span><span class=n>objet</span><span class=w> </span><span class=n>procuration</span><span class=w> </span><span class=err>Ã </span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>place</span><span class=w> </span><span class=n>d</span><span class=err>â€™</span><span class=n>un</span><span class=w> </span><span class=n>objet</span><span class=w> </span><span class=n>du</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>service</span><span class=p>,</span><span class=w> </span><span class=n>car</span><span class=w> </span><span class=n>ils</span><span class=w> </span><span class=n>implÃ©mentent</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>mÃªme</span><span class=w> </span><span class=n>interface</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>class</span><span class=w> </span><span class=n>YouTubeManager</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>protected</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=n>service</span><span class=p>:</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>constructor</span><span class=w> </span><span class=nf>YouTubeManager</span><span class=p>(</span><span class=n>service</span><span class=p>:</span><span class=w> </span><span class=n>ThirdPartyYouTubeLib</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>this</span><span class=p>.</span><span class=n>service</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>renderVideoPage</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=nf>getVideoInfo</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>//</span><span class=w> </span><span class=n>Affiche</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>page</span><span class=w> </span><span class=n>de</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>vidÃ©o</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>renderListPanel</span><span class=p>()</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>service</span><span class=p>.</span><span class=nf>listVideos</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>//</span><span class=w> </span><span class=n>Affiche</span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>liste</span><span class=w> </span><span class=n>des</span><span class=w> </span><span class=n>miniatures</span><span class=w> </span><span class=n>des</span><span class=w> </span><span class=n>vidÃ©os</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>reactOnUserInput</span><span class=p>()</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nf>renderVideoPage</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nf>renderListPanel</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>L</span><span class=err>â€™</span><span class=n>application</span><span class=w> </span><span class=n>peut</span><span class=w> </span><span class=n>configurer</span><span class=w> </span><span class=n>les</span><span class=w> </span><span class=n>procurations</span><span class=w> </span><span class=err>Ã </span><span class=w> </span><span class=n>la</span><span class=w> </span><span class=n>volÃ©e</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>class</span><span class=w> </span><span class=n>Application</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=w> </span><span class=nf>init</span><span class=p>()</span><span class=w> </span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>aYouTubeService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>new</span><span class=w> </span><span class=nf>ThirdPartyYouTubeClass</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>aYouTubeProxy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>new</span><span class=w> </span><span class=nf>CachedYouTubeClass</span><span class=p>(</span><span class=n>aYouTubeService</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>manager</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>new</span><span class=w> </span><span class=nf>YouTubeManager</span><span class=p>(</span><span class=n>aYouTubeProxy</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>manager</span><span class=p>.</span><span class=nf>reactOnUserInput</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#possibilitÃ©s-dapplication><h2 id=possibilitÃ©s-dapplication><span class=hanchor arialabel=Anchor># </span>PossibilitÃ©s dâ€™application</h2></a><p>La procuration possÃ¨de de nombreux usages. Passons en revue les plus populaires.</p><p>Instanciation paresseuse (procuration virtuelle). Ã€ utiliser lorsque lâ€™objet du service est trÃ¨s consommateur en ressources systÃ¨me car il est actif en permanence, mais vous nâ€™en avez pas tout le temps besoin.</p><p>Vous pouvez diffÃ©rer lâ€™initialisation de lâ€™objet plutÃ´t que de le crÃ©er au lancement de lâ€™application.</p><p>VÃ©rification des droits (procuration de protection). Si vous avez besoin de limiter lâ€™accÃ¨s de vos clients Ã  lâ€™objet du service, par exemple si vos objets sont des parties cruciales dâ€™un systÃ¨me dâ€™exploitation et que les clients sont diffÃ©rentes applications lancÃ©es (dont certaines sont malveillantes).</p><p>La procuration peut ne transmettre une demande Ã  lâ€™objet du service que si les identifiants du client remplissent certains critÃ¨res.</p><p>Lancement local dâ€™un service distant (procuration Ã  distance). Lâ€™objet du service se situe sur un serveur distant.</p><p>Dans ce cas, la procuration envoie la demande par le rÃ©seau en sâ€™occupant de gÃ©rer tous les dÃ©tails compliquÃ©s de la gestion du rÃ©seau.</p><p>Demande de logs (procuration de logs). Pour garder un historique des demandes passÃ©es auprÃ¨s de lâ€™objet du service.</p><p>La procuration peut garder la trace de toutes les demandes passÃ©es au service.</p><p>Mettre en cache les rÃ©sultats des demandes (procuration de cache). Si vous voulez mettre en cache les rÃ©sultats des demandes faites au client et gÃ©rer le cycle de vie de ce cache, principalement lorsque les rÃ©sultats sont imposants.</p><p>La procuration peut gÃ©rer la mise en cache des demandes rÃ©currentes qui retournent toujours le mÃªme rÃ©sultat. Les paramÃ¨tres des demandes peuvent servir de clÃ©.</p><p>RÃ©fÃ©rencement intelligent. Si vous voulez vous dÃ©barrasser dâ€™un objet trÃ¨s consommateur en ressources lorsquâ€™aucun client ne lâ€™utilise.</p><p>La procuration peut garder la trace des clients qui ont rÃ©cupÃ©rÃ© une rÃ©fÃ©rence vers lâ€™objet du service ou vers ses rÃ©sultats. De temps en temps, la procuration peut faire le tour des clients et vÃ©rifier sâ€™ils sont toujours actifs. Si la liste des clients est vide, la procuration peut supprimer lâ€™objet du service afin de libÃ©rer des ressources.</p><p>Elle peut Ã©galement savoir si le client avait modifiÃ© lâ€™objet du service. Les objets non modifiÃ©s peuvent ensuite Ãªtre rÃ©utilisÃ©s par les autres clients.</p><a href=#mise-en-Å“uvre><h2 id=mise-en-Å“uvre><span class=hanchor arialabel=Anchor># </span>Mise en Å“uvre</h2></a><ol><li><p>Si le service nâ€™a pas encore dâ€™interface, crÃ©ez-en une pour rendre la procuration et les objets du service interchangeables. Il nâ€™est pas toujours possible dâ€™extraire lâ€™interface de la classe du service, car vous devez effectuer des modifications pour que tous les clients du service utilisent cette interface. Heureusement, nous avons un plan B. Transformez la procuration en sous-classe de la classe service, afin quâ€™elle hÃ©rite de lâ€™interface du service.</p></li><li><p>CrÃ©ez la classe procuration. Elle doit inclure un attribut qui stocke la rÃ©fÃ©rence au service. En gÃ©nÃ©ral, les procurations crÃ©ent et gÃ¨rent le cycle de vie de leurs services. En de rares occasions, un service est passÃ© Ã  la procuration par le biais dâ€™un constructeur du client.</p></li><li><p>Mettez en place les mÃ©thodes de la procuration et leur fonctionnement. Dans la plupart des cas, la procuration doit dÃ©lÃ©guer le travail Ã  lâ€™objet du service aprÃ¨s avoir lancÃ© ses traitements.</p></li><li><p>RÃ©flÃ©chissez Ã  lâ€™implÃ©mentation dâ€™une mÃ©thode de crÃ©ation qui dÃ©cide si votre client doit utiliser directement le service ou passer par la procuration. Il peut sâ€™agir dâ€™une mÃ©thode statique toute simple ou dâ€™une classe procuration avec une mÃ©thode fabrique complÃ¨te.</p></li><li><p>Envisagez Ã©galement lâ€™implÃ©mentation dâ€™une instanciation paresseuse pour lâ€™objet du service.</p></li></ol><a href=#avantages-et-inconvÃ©nients><h2 id=avantages-et-inconvÃ©nients><span class=hanchor arialabel=Anchor># </span>Avantages et inconvÃ©nients</h2></a><ul><li><p>Vous pouvez contrÃ´ler lâ€™objet du service sans que le client ne sâ€™en aperÃ§oive.</p></li><li><p>Vous pouvez gÃ©rer le cycle de vie de lâ€™objet du service si les clients ne sâ€™en occupent pas.</p></li><li><p>La procuration fonctionne mÃªme si lâ€™objet du service nâ€™est pas prÃªt ou pas disponible.</p></li><li><p><em>Principe ouvert/fermÃ©</em>. Vous pouvez ajouter de nouvelles procurations sans toucher au service ou aux clients.</p></li><li><p>Le code peut devenir plus complexe puisque vous devez y introduire de nombreuses classes.</p></li><li><p>La rÃ©ponse du service peut mettre plus de temps Ã  arriver.</p></li></ul><a href=#liens-avec-les-autres-patrons><h2 id=liens-avec-les-autres-patrons><span class=hanchor arialabel=Anchor># </span>Liens avec les autres patrons</h2></a><ul><li><p>Lâ€™
<a href=https://refactoring.guru/fr/design-patterns/adapter rel=noopener>Adaptateur</a> procure une interface diffÃ©rente Ã  lâ€™objet emballÃ©, la
<a href=https://refactoring.guru/fr/design-patterns/proxy rel=noopener>Procuration</a> lui fournit la mÃªme interface et le
<a href=https://refactoring.guru/fr/design-patterns/decorator rel=noopener>DÃ©corateur</a> lui met Ã  disposition une interface amÃ©liorÃ©e.</p></li><li><p>La
<a href=https://refactoring.guru/fr/design-patterns/facade rel=noopener>FaÃ§ade</a> et la
<a href=https://refactoring.guru/fr/design-patterns/proxy rel=noopener>Procuration</a> ont une similaritÃ©Â : ils mettent en tampon une entitÃ© complexe et lâ€™initialisent individuellement. Contrairement Ã  la <em>faÃ§ade</em>, la <em>procuration</em> implÃ©mente la mÃªme interface que son objet service, ce qui les rend interchangeables.</p></li><li><p>Le
<a href=https://refactoring.guru/fr/design-patterns/decorator rel=noopener>DÃ©corateur</a> et la
<a href=https://refactoring.guru/fr/design-patterns/proxy rel=noopener>Procuration</a> ont des structures similaires, mais des intentions diffÃ©rentes. Ces deux patrons sont bÃ¢tis sur le principe de la composition, oÃ¹ un objet est censÃ© dÃ©lÃ©guer certains traitements Ã  un autre. La diffÃ©rence est quâ€™en principe, la <em>procuration</em> gÃ¨re elle-mÃªme le cycle de vie de son objet service, alors que la composition des <em>dÃ©corateurs</em> est toujours contrÃ´lÃ©e par le client.</p></li></ul><a href=#exemples-de-code><h2 id=exemples-de-code><span class=hanchor arialabel=Anchor># </span>Exemples de code</h2></a><p><a href=https://refactoring.guru/fr/design-patterns/proxy/java/example rel=noopener><img width=43 height=56 src=../../_resources/java_a0eb42f5aebc48258309a769bd3f2ca8.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/csharp/example rel=noopener><img width=43 height=56 src=../../_resources/csharp_f77b5e322a7a4c45bad3ce31c72ce495.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/cpp/example rel=noopener><img width=43 height=56 src=../../_resources/cpp_fb7eaa54ec944f68b19b6f01db34d95f.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/php/example rel=noopener><img width=43 height=56 src=../../_resources/php_66efd986b0f74c009b4526e2dd8e97e2.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/python/example rel=noopener><img width=43 height=56 src=../../_resources/python_b5ac4f08505047139db5727df5ad4b41.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/ruby/example rel=noopener><img width=43 height=56 src=../../_resources/ruby_efbb5e27b6f44d13a093639471f4fa94.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/swift/example rel=noopener><img width=43 height=56 src=../../_resources/swift_b7df4c4b325f4b8da153de520e4f1fc2.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/typescript/example rel=noopener><img width=43 height=56 src=../../_resources/typescript_931dfe2231594fe099522d266bbe80c7.svg></a>
<a href=https://refactoring.guru/fr/design-patterns/proxy/go/example rel=noopener><img width=43 height=56 src=../../_resources/go_6ac91ff300584d2b910e5f723d5eb211.svg></a></p><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener><img width=200 height=200 src=../../_resources/patterns-book-banner-3_6aaf8bfa7dfc4b79989512b18a2.png></a></p><a href=#soutenez-notre-site-gratuit-et-obtenez-lebook><h3 id=soutenez-notre-site-gratuit-et-obtenez-lebook><span class=hanchor arialabel=Anchor># </span>Soutenez notre site gratuit et obtenez lâ€™ebookâ€¯!</h3></a><ul><li>22 patrons de conception et 8 principes expliquÃ©s en profondeur.</li><li>444 pages de vulgarisation, bien structurÃ©es et faciles Ã  lire.</li><li>225 illustrations et diagrammes clairs pour aider Ã  la comprÃ©hension.</li><li>Une archive avec des exemples de code dans 9 langages.</li><li>Tous les appareils sont pris en chargeâ€¯: formats PDF/EPUB/MOBI/KFX.</li></ul><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener>En savoir plusâ€¦</a></p><a href=#suivant><h4 id=suivant><span class=hanchor arialabel=Anchor># </span>Suivant</h4></a><p><a href=https://refactoring.guru/fr/design-patterns/behavioral-patterns rel=noopener>Patrons comportementaux</a></p><a href=#retour><h4 id=retour><span class=hanchor arialabel=Anchor># </span>Retour</h4></a><p><a href=https://refactoring.guru/fr/design-patterns/flyweight rel=noopener>Poids mouche</a></p><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener><img width=245 height=375 src=../../_resources/web-cover-fr_8732287de86e489a9a66f92c20e1acbe.png></a></p><p>Cet article est tirÃ© de notre ebook
<strong>PlongÃ©e au cÅ“ur des
PATRONS DE CONCEPTION</strong></p><p><a href=https://refactoring.guru/fr/design-patterns/book rel=noopener>En savoir plusâ€¦</a></p><p>Facebook</p><p>Twitter</p><ul><li><a href="https://feedback.refactoring.guru/?lang=en&show_feedback_form_private=true" rel=noopener>Nous contacter</a></li><li><a href=https://refactoring.guru/fr/login rel=noopener>Connexion</a></li></ul><p><a href=https://refactoring.guru/design-patterns/proxy rel=noopener>English</a>
<a href=https://refactoring.guru/es/design-patterns/proxy rel=noopener>EspaÃ±ol</a>
<a href=https://refactoring.guru/fr/design-patterns/proxy rel=noopener>FranÃ§ais</a>
<a href=https://refactoring.guru/pl/design-patterns/proxy rel=noopener>Polski</a>
<a href=https://refactoring.guru/pt-br/design-patterns/proxy rel=noopener>PortuguÃªs-Br</a>
<a href=https://refactoring.guru/ru/design-patterns/proxy rel=noopener>Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
<a href=https://refactoring.guru/uk/design-patterns/proxy rel=noopener>Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</a>
<a href=https://refactoringguru.cn/design-patterns/proxy rel=noopener>ä¸­æ–‡</a></p><p><a href=https://refactoring.guru/fr rel=noopener><img src=https://deuxfois.github.io/quartz//../../_resources/logo-covid-winter_859d0ab064004adeafcbffedc354ade3.png width=auto alt=Refactoring.Guru></a></p><p><img src=https://deuxfois.github.io/quartz//../../_resources/winter-hat_a1e60a23c42c4a59be2f8b6a407293ff.png width=auto alt></p><ul><li><a href=https://refactoring.guru/fr/store rel=noopener>Contenu premium</a></li><li><a href=https://refactoring.guru/fr/design-patterns rel=noopener>Patrons de conception</a><ul><li><a href=https://refactoring.guru/fr/design-patterns/what-is-pattern rel=noopener>Introduction</a></li><li><a href=https://refactoring.guru/fr/design-patterns/catalog rel=noopener>Catalogue</a></li><li><a href=https://refactoring.guru/fr/design-patterns/creational-patterns rel=noopener>Patrons de crÃ©ation</a></li><li><a href=https://refactoring.guru/fr/design-patterns/structural-patterns rel=noopener>Patrons structurels</a><ul><li><a href=https://refactoring.guru/fr/design-patterns/adapter rel=noopener>Adaptateur</a></li><li><a href=https://refactoring.guru/fr/design-patterns/bridge rel=noopener>Pont</a></li><li><a href=https://refactoring.guru/fr/design-patterns/composite rel=noopener>Composite</a></li><li><a href=https://refactoring.guru/fr/design-patterns/decorator rel=noopener>DÃ©corateur</a></li><li><a href=https://refactoring.guru/fr/design-patterns/facade rel=noopener>FaÃ§ade</a></li><li><a href=https://refactoring.guru/fr/design-patterns/flyweight rel=noopener>Poids mouche</a></li><li><a href=https://refactoring.guru/fr/design-patterns/proxy rel=noopener>Procuration</a></li></ul></li><li><a href=https://refactoring.guru/fr/design-patterns/behavioral-patterns rel=noopener>Patrons comportementaux</a></li><li><a href=https://refactoring.guru/fr/design-patterns/examples rel=noopener>Exemples de code</a></li></ul></li><li><a href=https://refactoring.guru/fr/refactoring rel=noopener>Refactorisation (commenter bientÃ´t)</a></li></ul><p><a href=https://refactoring.guru/fr/login rel=noopener>Connexion</a>
<a href="https://feedback.refactoring.guru/?lang=en" rel=noopener>Nous contacter</a></p><ul><li><a href=https://refactoring.guru/fr rel=noopener>Accueil</a></li><li><a href=https://refactoring.guru/fr/refactoring rel=noopener>Refactorisation</a></li><li><a href=https://refactoring.guru/fr/design-patterns rel=noopener>Patrons de conception</a></li><li><a href=https://refactoring.guru/fr/store rel=noopener>Contenu premium</a></li><li><a href="https://feedback.refactoring.guru/?lang=en" rel=noopener>Forum</a></li><li><a href="https://feedback.refactoring.guru/?lang=en&show_feedback_form_private=true" rel=noopener>Nous contacter</a></li></ul><p>2014-2021
<a href=https://refactoring.guru/fr rel=noopener>Refactoring.Guru</a>. Tous droits rÃ©servÃ©s.
<img src=https://deuxfois.github.io/quartz//../../_resources/fa-building_87bf62543bf64cdc9482b81a7c692725.svg width=auto alt="Organization address"> Khmelnitske shosse 19 / 27, Kamianets-Podilskyi, Ukraine, 32305
Email:
<a rel=noopener class="internal-link broken" data-src=mailto:support@refactoring.guru>support@refactoring.guru</a></p><p>Illustrations par
<a href=http://zhart.us/ rel=noopener>Dmitry Zhart</a></p><ul><li><a href=https://refactoring.guru/fr/terms rel=noopener>Termes et conditions</a></li><li><a href=https://refactoring.guru/fr/privacy-policy rel=noopener>Politique de protection de la vie privÃ©e</a></li><li><a href=https://refactoring.guru/fr/content-usage-policy rel=noopener>Politique de lâ€™utilisation des donnÃ©es</a></li></ul></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz/Architecture/Design_Pattern/Structurel/Sommaire/ data-ctx=Procuration data-src=/Architecture/Design_Pattern/Structurel/Sommaire class=internal-link></a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://deuxfois.github.io/quartz/js/graph.afdb02e537635f9a611b53a988e5645b.js></script></div></div><div id=contact_buttons><footer><p>Made by Jacky Zhao using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2022</p><ul><li><a href=https://deuxfois.github.io/quartz/>Home</a></li><li><a href=https://twitter.com/_jzhao>Twitter</a></li><li><a href=https://github.com/jackyzha0>Github</a></li></ul></footer></div></div></body></html>